import{S as h}from"./sweetalert2.esm.all-D3pEHXw3.js";import{_ as f,b as _,c,d as m,f as t,F as p,r as v,h as b,o as n,t as u,l as k}from"./index-DVcwlKcb.js";const x={data(){return{productList:[],isLoading:!0}},methods:{getProductList(){_.get("https://vue3-course-api.hexschool.io/api/tingg-api/products/all").then(s=>{const i=s.data.products.map(l=>({...l,isFavorite:!0}));console.log(i);const d=JSON.parse(localStorage.getItem("favorites"))||[],a=i.filter(l=>d.includes(l.id));this.productList=a,this.isLoading=!1,console.log("我的最愛",a)})},getProduct(r){this.$router.push(`/user/product/${r}`)},addToCart(r){_.post("https://vue3-course-api.hexschool.io/api/tingg-api/cart",{data:{product_id:r,qty:1}}).then(o=>{console.log("商品已加入購物車:",o),this.cartAdded=!0,h.fire({title:"成功",text:"商品已成功加入購物車",icon:"success"})}).catch(o=>{console.error("加入購物車失敗:",o)})},toggleFavorite(r){const s=JSON.parse(localStorage.getItem("favorites"))||[],o=this.productList.find(i=>i.id===r);if(o){if(o.isFavorite=!o.isFavorite,o.isFavorite)s.push(r),h.fire("成功","商品已成功加入收藏","success");else{const i=s.indexOf(r);i>-1&&s.splice(i,1),h.fire("成功","商品已成功移除收藏","success")}localStorage.setItem("favorites",JSON.stringify(s)),this.productList=this.productList.filter(i=>i.isFavorite)}}},created(){this.getProductList()}},y={class:"container"},L={key:0,class:"row"},C={class:"card mx-2",style:{width:"100%",height:"auto"}},F=["onClick"],S=["src"],$={class:"card-body"},N={class:"card-title"},P={class:"border border-warning rounded-3 px-1"},w={class:"d-flex justify-content-around my-3"},I=["onClick"],O=["onClick"],T={key:0,class:"bi bi-heart fs-3 cursor-pointer"},B={key:1,class:"bi bi-suit-heart-fill text-danger fs-3"},J={key:0,class:"text-dark"},V={class:"d-flex align-items-center justify-content-between"},j={class:"text-danger"},q=["onClick"],A={key:1};function D(r,s,o,i,d,a){const l=b("Loading");return n(),c(p,null,[m(l,{active:d.isLoading,loader:"bars",color:"#e9e9d7"},null,8,["active"]),t("div",y,[s[2]||(s[2]=t("h2",{class:"text-center fw-bold mt-3"},"我的最愛",-1)),s[3]||(s[3]=t("hr",null,null,-1)),d.productList.length>=1?(n(),c("div",L,[(n(!0),c(p,null,v(d.productList,e=>(n(),c("div",{key:e.id,class:"col-12 col-md-3 col-sm-6 mb-4"},[t("div",C,[t("button",{class:"border border-0",onClick:g=>a.getProduct(e.id)},[t("img",{src:e.imageUrl,class:"card-img-top",alt:"Product Image"},null,8,S)],8,F),t("div",$,[t("h5",N,u(e.title),1),t("span",P,u(e.category),1),t("div",w,[t("button",{class:"btn custom-button bg-light rounded-3",onClick:g=>a.addToCart(e.id)},s[0]||(s[0]=[t("i",{class:"bi bi-cart fs-3"},null,-1)]),8,I),t("button",{class:"btn bg-light rounded-3",onClick:g=>a.toggleFavorite(e.id)},[e.isFavorite?(n(),c("i",B)):(n(),c("i",T))],8,O)]),e.origin_price>e.price?(n(),c("h5",J,[t("del",null,"$NT"+u(e.origin_price),1)])):k("",!0),t("div",V,[t("h5",j,"$NT"+u(e.price),1),t("button",{class:"btn btn-outline-dark",onClick:g=>a.getProduct(e.id)}," 更多資訊 ",8,q)])])])]))),128))])):(n(),c("div",A,s[1]||(s[1]=[t("h4",{class:"text-center"},"目前沒有最愛的商品喔",-1)])))])],64)}const z=f(x,[["render",D]]);export{z as default};
